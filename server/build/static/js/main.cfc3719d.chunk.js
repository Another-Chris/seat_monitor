(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(53),i=n.n(c),o=(n(91),n(132)),s=n(131),u=n(134),j=n(7),l=n.p+"static/media/logo.87e5137d.png",b=n(2),h=Object(j.a)(o.a)({backgroundColor:"white"}),d=Object(j.a)("img")({maxWidth:250}),O=Object(j.a)(s.a)((function(e){var t=e.theme;return{color:t.palette.grey[900],marginRight:t.spacing(20)}})),p=Object(j.a)(u.a)((function(e){return{display:"flex",justifyContent:"center",padding:e.theme.spacing(3)}}));var f=function(){return Object(b.jsx)(h,{position:"static",children:Object(b.jsxs)(p,{children:[Object(b.jsx)(O,{variant:"h5",children:"Seat Monitor"}),Object(b.jsx)(d,{src:l})]})})},v=n(43),x=n.n(v),m=n(55),g=n(12),y=n(78),w="GET_SEATS_INFO",C="RECEIVE_SEATS_INFO",k=function(){return new Promise((function(e,t){var n=Object(y.a)("https://seatmonitor.azurewebsites.net");n.io.on("error",(function(e){return t(e)})),n.on("connect",(function(t){e(n)}))}))},E=Object(a.createContext)({}),S=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(g.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:(t=e.sent).emit(w),i(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(b.jsx)(E.Provider,{value:{socket:c},children:t})},I=n(135),T=n(127),N=Object(T.a)("div")((function(e){e.theme;return{display:"flex",alignItems:"center",flexDirection:"column"}}));var M=function(){return Object(b.jsxs)(N,{children:[Object(b.jsx)(s.a,{style:{marginBottom:"1em"},variant:"body2",children:" loading... "}),Object(b.jsx)(I.a,{})]})},P=n(8),z=n(136),B=Object(j.a)("div")((function(e){e.theme;return{}})),F=Object(j.a)(s.a)((function(e){var t=e.theme;return Object(P.a)({},t.breakpoints.down("sm"),{fontSize:t.typography.h2.fontSize})})),_=Object(j.a)(z.a)((function(e){var t=e.theme,n=e.value<60;return{marginBottom:t.spacing(1),backgroundColor:n?t.palette.error.light+"30":t.palette.primary.light+"30","& .MuiLinearProgress-bar":{backgroundColor:n?t.palette.error.main:t.palette.primary.main}}}));var A=function(e){var t=e.availableSeats;return Object(b.jsxs)(B,{children:[Object(b.jsx)(F,{variant:"h1",children:t}),Object(b.jsx)(_,{value:20*t,variant:"determinate"}),Object(b.jsx)(s.a,{variant:"h6",children:"Available Seats"})]})},G=n(77),R=n.n(G);function D(e){if(e<60)return e<1?"< 1 minute":e+" minutes";var t=Math.floor(e/60),n=e-60*t;return"".concat(t," hour ").concat(n," minutes")}var J=n(133),L=n(128),W=n(137),H=n(138),U=n(139),V=n(140),q=n(129);function K(e){var t=function(e){return"available"===e.status?e.available:e.occupied}(e);if(0===t.length)return"<1 min";var n=0;return t.forEach((function(e){n+=e.duration})),n<1?"<1 min":(n/t.length).toFixed(2)+" min"}var Q=Object(j.a)("div")((function(e){var t=e.theme;return{display:"flex",justifyContent:"end",marginTop:t.spacing(2),marginRight:t.spacing(1)}}));var X=function(){var e=Object(a.useContext)(ce).seatInfo,t=e.status;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(W.a,{children:Object(b.jsxs)(H.a,{children:[Object(b.jsxs)(U.a,{children:[Object(b.jsxs)(V.a,{children:["average ","available"===t?"availability":"occupation"]}),Object(b.jsx)(V.a,{children:K(e)})]}),Object(b.jsxs)(U.a,{children:[Object(b.jsx)(V.a,{children:"next occupation"}),Object(b.jsxs)(V.a,{children:[" ","<1 min"]})]})]})}),Object(b.jsx)(Q,{children:Object(b.jsx)(q.a,{variant:"outlined",children:"predict"})})]})},Y=n(130),Z=n(141),$=Object(j.a)("div")((function(e){return{marginBottom:e.theme.spacing(2)}})),ee=Object(j.a)("div")((function(e){e.theme;return{display:"flex",justifyContent:"space-between"}}));var te=function(){var e=Object(a.useContext)(ce).seatInfo,t=e.seatNo,n=e.status;return Object(b.jsxs)($,{children:[Object(b.jsxs)(ee,{children:[Object(b.jsxs)(s.a,{variant:"h6",children:["No.",t]}),Object(b.jsx)(Y.a,{badgeContent:n,color:"available"===n?"success":"error"})]}),Object(b.jsx)(Z.a,{}),Object(b.jsx)(s.a,{variant:"caption",children:"very popular"})]})},ne=Object(j.a)("div")((function(e){e.theme;return{display:e.open?"block":"none",width:"100vw",height:"100vh",position:"fixed",backgroundColor:"#343a4080",left:0,top:0,cursor:"pointer"}})),ae=Object(j.a)(J.a)((function(e){return{padding:e.theme.spacing(2)}}));var re=function(e){var t=e.anchorEl,n=e.close;return Object(b.jsx)(ne,{id:"overlay",onMouseUp:function(e){"overlay"===e.target.id&&n()},open:t?1:0,children:Object(b.jsx)(L.a,{placement:"right",modifiers:[{name:"arrow",enabled:!0}],open:!!t,anchorEl:t,children:Object(b.jsxs)(ae,{children:[Object(b.jsx)(te,{}),Object(b.jsx)(X,{})]})})})},ce=Object(a.createContext)({}),ie=Object(j.a)(R.a)((function(e){var t=e.theme,n=e.status;return{display:"block",width:t.spacing(10),height:t.spacing(10),fill:"available"===n?t.palette.primary.dark:t.palette.grey[300],cursor:"pointer","&:hover":{fill:"available"===n?t.palette.primary.light:t.palette.grey[500]}}})),oe=Object(j.a)("div")((function(e){return{display:"flex",flexDirection:"column",marginLeft:e.theme.spacing(2),justifyContent:"center"}})),se=Object(j.a)("div")((function(e){e.theme;return{display:"flex"}})),ue=Object(j.a)(s.a)((function(e){return{marginTop:.5*e.theme.spacing(1)}}));function je(e){var t=e.seatInfo,n=t.status,r=t.duration,c=t.seatNo,i=Object(a.useState)(),o=Object(g.a)(i,2),u=o[0],j=o[1];return Object(b.jsx)(ce.Provider,{value:{seatInfo:t},children:Object(b.jsxs)(se,{children:[Object(b.jsx)(ie,{onClick:function(e){return j(e.target)},status:n},c),Object(b.jsxs)(oe,{children:[Object(b.jsxs)(s.a,{variant:"caption",children:[n," for"]}),Object(b.jsx)(ue,{variant:"h6",children:D(r)}),Object(b.jsx)(re,{anchorEl:u,close:function(){return j(null)}})]})]})})}var le=Object(a.memo)(je),be=Object(j.a)("div")((function(e){var t=e.theme;return{display:"grid",gridTemplateColumns:"repeat(2,1fr)",marginTop:t.spacing(5),rowGap:t.spacing(3)}}));function he(){var e=Object(a.useContext)(Oe).seats;return Object(b.jsx)(be,{children:e.map((function(e){return Object(b.jsx)(le,{seatInfo:e},e.seatNo)}))})}var de=Object(a.memo)(he),Oe=Object(a.createContext)({}),pe="https://seatmonitor.azurewebsites.net",fe=Object(j.a)("div")((function(e){var t=e.theme;return{padding:t.spacing(2),margin:"".concat(t.spacing(10)," auto"),minHeight:500,maxWidth:800}}));function ve(){var e=Object(a.useContext)(E).socket,t=Object(a.useState)([]),n=Object(g.a)(t,2),r=n[0],c=n[1];console.log(r),Object(a.useEffect)((function(){function t(){return(t=Object(m.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(pe+"/seats",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),e&&e.on(C,(function(e){return c(e)}))}),[e]);var i=r.filter((function(e){return"available"===e.status})).length;return Object(b.jsx)(Oe.Provider,{value:{seats:r},children:e&&0!==r.length?Object(b.jsxs)(fe,{children:[Object(b.jsx)(A,{availableSeats:i}),Object(b.jsx)(de,{})]}):Object(b.jsx)(M,{})})}var xe=Object(a.memo)(ve);var me=function(){return Object(b.jsxs)(S,{children:[Object(b.jsx)(f,{}),Object(b.jsx)(xe,{})]})};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(me,{})}),document.getElementById("root"))},91:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.cfc3719d.chunk.js.map