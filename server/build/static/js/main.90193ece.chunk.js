(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{157:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(58),i=n.n(c),s=(n(157),n(241)),o=n(243),u=n(244),j=n(6),l=n.p+"static/media/logo.87e5137d.png",b=n(1),d=Object(j.a)(s.a)({backgroundColor:"white"}),h=Object(j.a)("img")({maxWidth:250}),O=Object(j.a)(o.a)((function(e){var t=e.theme;return{color:t.palette.grey[900],marginRight:t.spacing(20)}})),p=Object(j.a)(u.a)((function(e){return{display:"flex",justifyContent:"center",padding:e.theme.spacing(3)}}));var f=function(){return Object(b.jsx)(d,{position:"static",children:Object(b.jsxs)(p,{children:[Object(b.jsx)(O,{variant:"h5",children:"Seat Monitor"}),Object(b.jsx)(h,{src:l})]})})},x=n(74),v=n.n(x),m=n(94),g=n(9),y=n(135),C="GET_SEATS_INFO",w="RECEIVE_SEATS_INFO",k=function(){return new Promise((function(e,t){var n=Object(y.a)("https://seatmonitor.azurewebsites.net");n.io.on("error",(function(e){return t(e)})),n.on("connect",(function(t){e(n)}))}))},S=Object(a.createContext)({}),E=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(g.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:(t=e.sent).emit(C),i(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(b.jsx)(S.Provider,{value:{socket:c},children:t})},I=n(245),T=n(218),P=Object(T.a)("div")((function(e){e.theme;return{display:"flex",alignItems:"center",flexDirection:"column"}}));var N=function(){return Object(b.jsxs)(P,{children:[Object(b.jsx)(o.a,{style:{marginBottom:"1em"},variant:"body2",children:" loading... "}),Object(b.jsx)(I.a,{})]})},W=n(3),z=n(246),A=Object(j.a)("div")((function(e){e.theme;return{}})),L=Object(j.a)(o.a)((function(e){var t=e.theme;return Object(W.a)({},t.breakpoints.down("sm"),{fontSize:t.typography.h2.fontSize})})),M=Object(j.a)(z.a)((function(e){var t=e.theme,n=e.value<60;return{marginBottom:t.spacing(1),backgroundColor:n?t.palette.error.light+"30":t.palette.primary.light+"30","& .MuiLinearProgress-bar":{backgroundColor:n?t.palette.error.main:t.palette.primary.main}}}));var R=function(e){var t=e.availableSeats;return Object(b.jsxs)(A,{children:[Object(b.jsx)(L,{variant:"h1",children:t}),Object(b.jsx)(M,{value:20*t,variant:"determinate"}),Object(b.jsx)(o.a,{variant:"h6",children:"Available Seats"})]})},B=n(134),F=n.n(B);function G(e){if(e<60)return e<1?"< 1 minute":e+" minutes";var t=Math.floor(e/60),n=e-60*t;return"".concat(t," hour ").concat(n," minutes")}var _=n(242),D=n(232),J=n(253),H=n(247),U=n(248),V=n(249),q=n(250);function K(e){var t=e.availability;return 0===t.length?0:t.filter((function(e){return 1===e.statusCode})).length/t.length}var Q=function(){var e=Object(a.useContext)(Se).seatInfo;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(H.a,{children:Object(b.jsx)(U.a,{children:Object(b.jsxs)(V.a,{children:[Object(b.jsx)(q.a,{children:"average availability"}),Object(b.jsxs)(q.a,{children:[K(e)," %"]})]})})})})},X=n(237),Y=n(251),Z=Object(j.a)("div")((function(e){return{marginBottom:e.theme.spacing(2)}})),$=Object(j.a)("div")((function(e){e.theme;return{display:"flex",justifyContent:"space-between"}}));var ee=function(){var e,t=Object(a.useContext)(Se).seatInfo,n=t.seatNo,r=t.status;return"available"===r?e="success":"occupied"===r?e="error":"suspicious"===r&&(e="warning"),Object(b.jsxs)(Z,{children:[Object(b.jsxs)($,{children:[Object(b.jsxs)(o.a,{variant:"h6",children:["No.",n]}),Object(b.jsx)(X.a,{badgeContent:r,color:e})]}),Object(b.jsx)(Y.a,{}),Object(b.jsx)(o.a,{variant:"caption",children:"very popular"})]})},te=n(252),ne=n(117),ae=n(233),re=n(231),ce=n(219),ie=n(236),se=n(234),oe=Object(j.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column"}})),ue=Object(j.a)("div")((function(e){var t=e.theme;return{margin:"".concat(t.spacing(1)," 0")}}));var je=function(){var e=Object(a.useState)(null),t=Object(g.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(g.a)(c,2),s=i[0],o=i[1],u=Object(a.useContext)(me),j=u.setLoading,l=u.setPredicted;return Object(b.jsx)(ce.b,{dateAdapter:re.a,children:Object(b.jsxs)(oe,{children:[Object(b.jsx)(ie.a,{label:"date",onChange:function(e){return r(e)},value:n,renderInput:function(e){return Object(b.jsx)(ae.a,Object(ne.a)({},e))}}),Object(b.jsx)(ue,{}),Object(b.jsx)(se.a,{label:"time",onChange:function(e){return o(e)},value:s,renderInput:function(e){return Object(b.jsx)(ae.a,Object(ne.a)({},e))}}),Object(b.jsx)(ue,{}),Object(b.jsx)(J.a,{disabled:!(n&&s),onClick:function(){j(!0),fetch("https://seatmonitor.azurewebsites.net/predict",{method:"GET"}).then((function(e){return e.json()})).then((function(e){j(!1),l(e)}))},variant:"contained",children:"Predict"})]})})},le=Object(j.a)(_.a)((function(e){return{minWidth:300,maxWidth:400,borderRadius:3,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:e.theme.spacing(1)}})),be=Object(j.a)(o.a)((function(e){return{fontWeight:"bold",color:e.theme.palette.grey[200]}})),de=Object(j.a)(o.a)((function(e){var t=e.theme;return{fontWeight:"bold",color:"available"===e.status?t.palette.success.main:t.palette.error.main,textTransform:"uppercase",margin:"".concat(t.spacing(1)," 0")}}));var he=function(){var e=Object(a.useContext)(me),t=e.loading,n=e.predicted;return Object(b.jsx)(le,{elevation:0,variant:"outlined",children:t?Object(b.jsx)(I.a,{}):n?Object(b.jsxs)("div",{children:[Object(b.jsx)(o.a,{variant:"caption",children:"This seat will probabily be"}),Object(b.jsx)(de,{status:n.status,variant:"h5",children:n.status}),Object(b.jsxs)(o.a,{children:["Availability: ",Number(n.confidence).toFixed(2)," %"]})]}):Object(b.jsx)(be,{variant:"h5",children:"Results"})})},Oe=n(133),pe=n.n(Oe),fe=Object(j.a)(_.a)((function(e){return{padding:e.theme.spacing(1)}})),xe=Object(j.a)("div")((function(e){return{display:"flex",marginTop:e.theme.spacing(2)}})),ve=Object(j.a)("div")((function(e){return{display:"flex",marginTop:e.theme.spacing(2),alignItems:"center"}})),me=Object(a.createContext)({});var ge=function(e){var t=e.anchorEl,n=e.closePredict,r=Object(a.useState)(!1),c=Object(g.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(null),j=Object(g.a)(u,2),l=j[0],d=j[1];return Object(b.jsx)(D.a,{placement:"right",anchorEl:t,open:!!t,children:Object(b.jsx)(me.Provider,{value:{loading:i,setLoading:s,predicted:l,setPredicted:d},children:Object(b.jsxs)(fe,{children:[Object(b.jsxs)(ve,{children:[Object(b.jsx)(te.a,{onClick:n,children:Object(b.jsx)(pe.a,{})}),Object(b.jsx)(o.a,{variant:"h5",children:"Predictor"})]}),Object(b.jsxs)(xe,{children:[Object(b.jsx)(je,{}),Object(b.jsx)(he,{})]})]})})})},ye=Object(j.a)("div")((function(e){e.theme;return{display:e.open?"block":"none",width:"100vw",height:"100vh",position:"fixed",backgroundColor:"#343a4080",left:0,top:0,cursor:"pointer"}})),Ce=Object(j.a)(_.a)((function(e){return{padding:e.theme.spacing(2)}})),we=Object(j.a)("div")((function(e){var t=e.theme;return{display:"flex",justifyContent:"end",marginTop:t.spacing(2),marginRight:t.spacing(1)}}));var ke=function(e){var t=e.anchorEl,n=e.close,r=Object(a.useState)(null),c=Object(g.a)(r,2),i=c[0],s=c[1],o=function(e){return s(null)};return Object(b.jsx)(ye,{id:"overlay",onMouseUp:function(e){"overlay"===e.target.id&&(n(),o())},open:t?1:0,children:i?Object(b.jsx)(ge,{closePredict:o,anchorEl:i}):Object(b.jsx)(D.a,{placement:"right",modifiers:[{name:"arrow",enabled:!0}],open:!!t,anchorEl:t,children:Object(b.jsxs)(Ce,{children:[Object(b.jsx)(ee,{}),Object(b.jsx)(Q,{}),Object(b.jsx)(we,{children:Object(b.jsx)(J.a,{onClick:function(e){return s(t)},variant:"outlined",children:"predict"})})]})})})},Se=Object(a.createContext)({}),Ee=Object(j.a)(F.a)((function(e){var t,n,a=e.theme,r=e.status;return"available"===r?(t=a.palette.primary.dark,n=a.palette.primary.light):"occupied"===r?(t=a.palette.grey[300],n=a.palette.grey[500]):"suspicious"===r&&(t=a.palette.warning.main,n=a.palette.warning.light),{display:"block",width:a.spacing(10),height:a.spacing(10),fill:t,cursor:"pointer","&:hover":{fill:n}}})),Ie=Object(j.a)("div")((function(e){return{display:"flex",flexDirection:"column",marginLeft:e.theme.spacing(2),justifyContent:"center"}})),Te=Object(j.a)("div")((function(e){e.theme;return{display:"flex"}})),Pe=Object(j.a)(o.a)((function(e){return{marginTop:.5*e.theme.spacing(1)}}));function Ne(e){var t=e.seatInfo,n=t.status,r=t.duration,c=t.seatNo,i=Object(a.useState)(),s=Object(g.a)(i,2),u=s[0],j=s[1];return Object(b.jsx)(Se.Provider,{value:{seatInfo:t},children:Object(b.jsxs)(Te,{children:[Object(b.jsx)(Ee,{onClick:function(e){return j(e.target)},status:n},c),Object(b.jsxs)(Ie,{children:[Object(b.jsxs)(o.a,{variant:"caption",children:[n," for"]}),Object(b.jsx)(Pe,{variant:"h6",children:G(r)}),Object(b.jsx)(ke,{anchorEl:u,close:function(){return j(null)}})]})]})})}var We=Object(a.memo)(Ne),ze=Object(j.a)("div")((function(e){var t=e.theme;return{display:"grid",gridTemplateColumns:"repeat(2,1fr)",marginTop:t.spacing(5),rowGap:t.spacing(3)}}));function Ae(){var e=Object(a.useContext)(Me).seats;return Object(b.jsx)(ze,{children:e.map((function(e){return Object(b.jsx)(We,{seatInfo:e},e.seatNo)}))})}var Le=Object(a.memo)(Ae),Me=Object(a.createContext)({}),Re="https://seatmonitor.azurewebsites.net",Be=Object(j.a)("div")((function(e){var t=e.theme;return{padding:t.spacing(2),margin:"".concat(t.spacing(10)," auto"),minHeight:500,maxWidth:800}}));function Fe(){var e=Object(a.useContext)(S).socket,t=Object(a.useState)([]),n=Object(g.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){function t(){return(t=Object(m.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Re+"/seats",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),e&&e.on(w,(function(e){return c(e)}))}),[e]);var i=r.filter((function(e){return"available"===e.status})).length;return Object(b.jsx)(Me.Provider,{value:{seats:r},children:e&&0!==r.length?Object(b.jsxs)(Be,{children:[Object(b.jsx)(R,{availableSeats:i}),Object(b.jsx)(Le,{})]}):Object(b.jsx)(N,{})})}var Ge=Object(a.memo)(Fe);var _e=function(){return Object(b.jsxs)(E,{children:[Object(b.jsx)(f,{}),Object(b.jsx)(Ge,{})]})};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(_e,{})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.90193ece.chunk.js.map